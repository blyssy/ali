<div class="ibox-content">
	<div class="well">      
      <div><h2 class="control-label">Plan Task {{p.name}}  - {{p.trade}}{{p.task}} Totals:</h2>
      	<div class="row">
      		<div class="col-md-2">
		      <label>Task Direct Labor</label>
		      <span class="form-control m-b" disabled>{{p.total_current_net_pay | currency}}</span>
		    </div>
	      	<div class="col-md-2">
	      	  <label>Task Materials</label>
		      <!-- <input type="text" ng-model="p.name" class="col-md-2" value="{{p.name}}" disabled> -->
		      <span class="form-control m-b" disabled>{{p.total_materials | currency}}</span>
		    </div>
		    <div class="col-md-2">
		      <label>Task Equipment</label>
		      <span class="form-control m-b" disabled>{{p.total_equipment | currency}}</span>
		    </div>
	      	<div class="col-md-2">
	      	  <label>Task Hours Allowed</label>
		      <!-- <input type="text" ng-model="p.name" class="col-md-2" value="{{p.name}}" disabled> -->
		      <span class="form-control m-b" disabled>{{p.total_hours_allowed}}</span>
		    </div>
		    <div class="col-md-2">
		      <label>Task Emp. Benefits</label>
		      <span class="form-control m-b" disabled>{{p.total_employee_benefits | currency}}</span>
		    </div>
		    <div class="col-md-2">
		      <label>Task T&E</label>
		      <span class="form-control m-b" disabled>{{p.total_training_and_education | currency}}</span>
		    </div>
		</div><hr>
		<!-- <div data-ng-if="p.subtasks.length"><h3 class="control-label">Sub Tasks:</h3></div> -->
		<div class="row">
			<div class="ibox-title"><h3 class="control-label">{{p.name}} Sub Tasks</h3></div>
			<div class="ibox-content">
				<div class="well well-lg">
					<div data-ng-if="p.subtasks.length">
						<div ng-repeat="item in p.subtasks">
							<h2 class="control-label">{{item.name}}</h2>
							<div class="col-md-2">
								<!-- <div data-ng-if="!item.bid_hours"> -->
									<label>Quantity</label>
									<input type="text" ng-model="item.quantity" class="form-control m-b" value="{{item.quantity}}">
								<!-- </div>
								<div data-ng-if="item.bid_hours">
									<label>Quantity</label>
									<input type="text" ng-model="item.quantity" class="form-control m-b" value="{{item.quantity}}" disabled>
								</div> -->
							</div>
							<div class="col-md-2">
								<label>Piece Rate</label>
								<span class="form-control m-b" disabled>{{item.piece_rate | currency}}</span>
							</div>
							<div class="col-md-2">
								<label>Crew Rate</label>
								<span class="form-control m-b" disabled>{{item.crew_rate | currency}}</span>
							</div>
							<!-- <div class="col-md-2">
								<label>Piece/Hour Rate</label>
								<input type="text" ng-model="item.piece_per_hour_rate" class="form-control m-b" value="{{item.piece_per_hour_rate}}">
							</div> -->
							<div class="col-md-2">
								<label>Hours Bid</label>
								<input type="text" ng-model="item.bid_hours" class="form-control m-b" value="{{item.bid_hours}}">
								<!-- <input type="text" ng-model="item.hours_bid" class="form-control m-b" value="{{item.quantity*(item.piece_rate/item.piece_per_hour_rate)}}"> -->
							</div>
							<div class="col-md-2">
						      	<label>Hours Allowed</label>
						      	<span class="form-control m-b" disabled>{{hoursAllowed(item.bid_hours, currentNetPay(item.bid_hours, item.crew_rate, item.quantity, item.piece_rate), item.crew_rate)}}</span>
						    </div>
							<div class="col-md-2">
						      	<label>Direct Labor Costs</label>
						      	<span class="form-control m-b" disabled>{{currentNetPay(item.bid_hours, item.crew_rate, item.quantity, item.piece_rate) | currency}}</span>
						    </div>

							<br><br><br><br>
							
							<!-- <div data-ng-if="item.materials.length">
								<div class="ibox-title"><h3 class="control-label">{{item.name}} - Materials:</h3></div>
								<div class="ibox-content">
									<div class="row">
										<div class="well well-lg">
											<div ng-repeat="mat in item.materials">
												<h4>{{mat.name}} - {{mat.description}}</h4>
												<div class="col-md-2">
													<label class="control-label">Quantity</label>
													<input type="text" ng-model="mat.quantity" class="form-control m-b" value="{{mat.quantity}}">
												</div>
												<div class="col-md-2">
													<label class="control-label">Measurement</label>
													<input type="text" ng-model="mat.unit" class="form-control m-b" value="{{mat.unit}}" disabled>
												</div>
												<div class="col-md-2">
													<label class="control-label">Units/Order</label>
													<input type="text" ng-model="mat.units_per_order" class="form-control m-b" value="{{mat.units_per_order}}" disabled>
												</div>
												<div class="col-md-2">
													<label class="control-label">Price/Order</label>
													<span ng-model="mat.price_per_order" class="form-control m-b" disabled>{{mat.price_per_order | currency}}</span>
												</div>
												<div class="col-md-2">
													<label class="control-label">Delivery Price</label>
													<input type="text" ng-model="mat.delivery_price" class="form-control m-b" value="{{mat.delivery_price}}" my-currency>
												</div>
												<div class="col-md-2">
													<label class="control-label">Mat. Total</label>
													<span class="form-control m-b" disabled>{{mat.quantity*mat.price_per_order | currency}}
												</div>
												<div class="row"></div>
											</div>
											<div class="row">
												<div class="col-md-8"></div>
												<div class="col-md-2">
													<label class="control-label">Delivery Sub Total</label>
													<span class="form-control m-b" disabled>{{item.material_delivery_subtotal | currency}}</span>
												</div>
												<div class="col-md-2">
													<label class="control-label">Sub Total</label>
													<span class="form-control m-b" disabled>{{item.material_subtotal | currency}}</span>
												</div>
											</div>
										</div>
									</div>
								</div>
								<br><br><br><br>
							<div data-ng-if="item.equipment.length">
								<div class="ibox-title"><h3 class="control-label">{{item.name}} - Equipment:</h3></div>
								<div class="ibox-content">
									<div class="row">
										<div class="well well-lg">
											<div ng-repeat="equip in item.equipment">
												<h4>{{equip.name}} - {{equip.description}}</h4>
												<div class="col-md-2">
													<label class="control-label">Quantity</label>
													<input type="text" ng-model="equip.quantity" class="form-control m-b" value="{{equip.quantity}}">
												</div>
												<div class="col-md-2">
													<label class="control-label">Price</label>
													<span ng-model="equip.price" class="form-control m-b" disabled>{{equip.price | currency}}</span>
												</div>
												<div class="col-md-2">
													<label class="control-label">Delivery Price</label>
													<input type="text" ng-model="equip.delivery_price" class="form-control m-b" value="{{equip.delivery_price}}" my-currency>
												</div>
												<div class="col-md-2">
													<label class="control-label">Equip. Total</label>
													<span class="form-control m-b" disabled>{{equip.quantity*equip.price | currency}}
												</div>
												<div class="row"></div>
											</div>
											<div class="row">
												<div class="col-md-8"></div>
												<div class="col-md-2">
													<label class="control-label">Delivery Sub Total</label>
													<span class="form-control m-b" disabled>{{item.equipment_delivery_subtotal | currency}}</span>
												</div>
												<div class="col-md-2">
													<label class="control-label">Sub Total</label>
													<span class="form-control m-b" disabled>{{item.equipment_subtotal | currency}}</span>
												</div>
											</div>
										</div>
									</div>
								</div>
								<br><br><br><br>
							</div> -->
						</div>
					
						<div class="row">
							<div class="col-md-8"></div>
							<div class="col-md-2">
						      	<label>Hours Allowed Sub Total</label>
						      	<span class="form-control m-b" disabled>{{currentNetPay(item.bid_hours, item.crew_rate, item.quantity, item.piece_rate) | currency}}</span>
						    </div>
							<div class="col-md-2">
						      	<label>Labor Sub Total</label>
						      	<span class="form-control m-b" disabled>{{currentNetPay(item.bid_hours, item.crew_rate, item.quantity, item.piece_rate) | currency}}</span>
						    </div>
						</div>
				    </div>
				</div>
			</div>
		</div>

		<div class="row">
			<div data-ng-if="p.subtasks.length">
				<div ng-repeat="item in p.subtasks">
					<div data-ng-if="item.materials.length">
						<!-- <div class="ibox-title"><h3 class="control-label">Subtask Materials</h3></div> -->
						<div class="ibox-content">
							<!-- <div class="well well-lg"> -->
						
								<!-- <h2 class="control-label">{{item.name}}</h2> -->
								<!-- <div data-ng-if="item.materials.length"> -->
									<div class="ibox-title"><h3 class="control-label">{{item.name}} - Materials:</h3></div>
									<div class="ibox-content">
										<div class="row">
											<!-- <div class="well well-lg"> -->
												<div ng-repeat="mat in item.materials">
													<h4>{{mat.description}}</h4>
													<div class="col-md-2">
														<label class="control-label">Quantity</label>
														<input type="text" ng-model="mat.quantity" class="form-control m-b" value="{{mat.quantity}}">
													</div>
													<div class="col-md-2">
														<label class="control-label">Measurement</label>
														<input type="text" ng-model="mat.unit" class="form-control m-b" value="{{mat.unit}}" disabled>
													</div>
													<div class="col-md-2">
														<label class="control-label">Units/Order</label>
														<input type="text" ng-model="mat.units_per_order" class="form-control m-b" value="{{mat.units_per_order}}" disabled>
													</div>
													<div class="col-md-2">
														<label class="control-label">Price/Order</label>
														<span ng-model="mat.price_per_order" class="form-control m-b" disabled>{{mat.price_per_order | currency}}</span>
													</div>
													<div class="col-md-2">
														<label class="control-label">Delivery Price</label>
														<input type="text" ng-model="mat.delivery_price" class="form-control m-b" value="{{mat.delivery_price}}" my-currency>
													</div>
													<div class="col-md-2">
														<label class="control-label">Mat. Total</label>
														<span class="form-control m-b" disabled>{{mat.quantity*mat.price_per_order | currency}}
													</div>
													<div class="row"></div>
												</div>
												<div class="row">
													<div class="col-md-8"></div>
													<div class="col-md-2">
														<label class="control-label">Delivery Sub Total</label>
														<span class="form-control m-b" disabled>{{item.material_delivery_subtotal | currency}}</span>
													</div>
													<div class="col-md-2">
														<label class="control-label">Sub Total</label>
														<span class="form-control m-b" disabled>{{item.material_subtotal | currency}}</span>
													</div>
												</div>
											<!-- </div> -->
										</div>
									</div>
								<!-- </div> -->
								<div data-ng-if="item.equipment.length">
									<div class="ibox-title"><h3 class="control-label">{{item.name}} - Equipment:</h3></div>
									<div class="ibox-content">
										<div class="row">
											<!-- <div class="well well-lg"> -->
												<div ng-repeat="equip in item.equipment">
													<h4>{{equip.name}} - {{equip.description}}</h4>
													<div class="col-md-2">
														<label class="control-label">Quantity</label>
														<input type="text" ng-model="equip.quantity" class="form-control m-b" value="{{equip.quantity}}">
													</div>
													<div class="col-md-2">
														<label class="control-label">Price</label>
														<span ng-model="equip.price" class="form-control m-b" disabled>{{equip.price | currency}}</span>
													</div>
													<div class="col-md-2">
														<label class="control-label">Delivery Price</label>
														<input type="text" ng-model="equip.delivery_price" class="form-control m-b" value="{{equip.delivery_price}}" my-currency>
													</div>
													<div class="col-md-2">
														<label class="control-label">Equip. Total</label>
														<span class="form-control m-b" disabled>{{equip.quantity*equip.price | currency}}
													</div>
													<div class="row"></div>
												</div>
												<div class="row">
													<div class="col-md-8"></div>
													<div class="col-md-2">
														<label class="control-label">Delivery Sub Total</label>
														<span class="form-control m-b" disabled>{{item.equipment_delivery_subtotal | currency}}</span>
													</div>
													<div class="col-md-2">
														<label class="control-label">Sub Total</label>
														<span class="form-control m-b" disabled>{{item.equipment_subtotal | currency}}</span>
													</div>
												</div>
											<!-- </div> -->
										</div>
									</div>
								</div>
							<!-- </div> -->
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div data-ng-if="p.materials.length">
			<div class="ibox-title"><h3 class="control-label">Task Materials:</h3></div>
			<div class="ibox-content">
				<div class="well">
					<div class="row">
						<div ng-repeat="item in p.materials">
							<h4>{{item.name}}</h4>
							<div class="col-md-2">
								<label>Quantity</label>
								<input type="text" ng-model="item.quantity" class="form-control m-b" value="{{item.quantity}}">
							</div>
							<div class="col-md-2">
								<label>Measurement</label>
								<input type="text" ng-model="item.unit" class="form-control m-b" value="{{item.unit}}" disabled>
							</div>
							<div class="col-md-2">
								<label>Units Per Order</label>
								<input type="text" ng-model="item.units_per_order" class="form-control m-b" value="{{item.units_per_order}}" disabled>
							</div>
							<div class="col-md-2">
								<label>Price Per Order</label>
								<span class="form-control m-b" disabled>{{item.price_per_order}}</span>
							</div>
							<div class="col-md-2">
								<label>Delivery Price</label>
								<input type="text" ng-model="item.delivery_price" class="form-control m-b" value="{{item.delivery_price}}" my-currency>
							</div>
							<div class="col-md-2">
								<label>Total</label>
								<span class="form-control m-b" disabled>{{item.quantity*item.price_per_order | currency}}</span>
							</div>
							<br><br><br><br>
						</div>
						<div class="row">
							<div class="col-md-8"></div>
							<div class="col-md-2">
								<label class="control-label">Delivery Sub Total</label>
								<span class="form-control m-b" disabled>{{p.materials_dev_subtotal | currency}}</span>
							</div>
							<div class="col-md-2">
								<label class="control-label">Sub Total</label>
								<span class="form-control m-b" disabled>{{p.materials_subtotal | currency}}</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div data-ng-if="p.equipment.length">
			<div class="ibox-title"><h3 class="control-label">Task Equipment:</h3></div>
			<div class="ibox-content">
				<div class="well">
					<div class="row">
						<div ng-repeat="equip in p.equipment">
							<h4>{{equip.name}} - {{equip.description}}</h4>
							<div class="col-md-2">
								<label class="control-label">Quantity</label>
								<input type="text" ng-model="equip.quantity" class="form-control m-b" value="{{equip.quantity}}">
							</div>
							<div class="col-md-2">
								<label class="control-label">Price</label>
								<span ng-model="equip.price" class="form-control m-b" disabled>{{equip.price | currency}}</span>
							</div>
							<div class="col-md-2">
								<label class="control-label">Delivery Price</label>
								<input type="text" ng-model="equip.delivery_price" class="form-control m-b" value="{{equip.delivery_price}}" my-currency>
							</div>
							<div class="col-md-2">
								<label class="control-label">Equip. Total</label>
								<span class="form-control m-b" disabled>{{equip.quantity*equip.price | currency}}
							</div>
							<div class="row"></div>
						</div>
						<div class="row">
							<div class="col-md-8"></div>
							<div class="col-md-2">
								<label class="control-label">Delivery Sub Total</label>
								<span class="form-control m-b" disabled>{{p.equipment_dev_subtotal | currency}}</span>
							</div>
							<div class="col-md-2">
								<label class="control-label">Sub Total</label>
								<span class="form-control m-b" disabled>{{p.equipment_subtotal | currency}}</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
  	  </div>
  
      <div class="pull-right">
      	<button class="btn btn-primary dim" type="button" ng-click="update(p)"><i class="fa fa-save"></i> Save</button>
      	<button class="btn btn-primary dim" type="button" ng-click="next(p._id)"><i class="fa fa-arrow-circle-o-right"></i> Next</button>
      	<button class="btn btn-primary dim" type="button" ng-click="setTaskEditId(-1)"><i class="fa fa-times"></i> Close</button>
      </div>
	</div>
</div>